:root{--color-primary: #6366f1;--color-primary-light: #818cf8;--color-primary-dark: #4f46e5;--color-primary-soft: #eef2ff;--color-success: #22c55e;--color-success-dark: #16a34a;--color-warning: #f59e0b;--color-error: #ef4444;--color-error-soft: rgba(239, 68, 68, .15);--color-bg-app: #f5f5f7;--color-bg-surface: #ffffff;--color-bg-elevated: #ffffff;--color-bg-muted: #f9fafb;--color-bg-canvas: #f8fafc;--color-bg-overlay: rgba(15, 23, 42, .45);--color-bg-overlay-blur: rgba(255, 255, 255, .7);--color-text-primary: #111827;--color-text-secondary: #6b7280;--color-text-muted: #9ca3af;--color-text-inverse: #ffffff;--color-border-default: #e5e7eb;--color-border-subtle: #e0e0e6;--color-border-focus: var(--color-primary);--font-family-base: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", sans-serif;--font-family-mono: "SF Mono", Monaco, Consolas, monospace;--font-size-xs: 11px;--font-size-sm: 12px;--font-size-md: 13px;--font-size-lg: 14px;--font-size-xl: 16px;--font-size-2xl: 18px;--font-weight-normal: 400;--font-weight-medium: 500;--font-weight-semibold: 600;--font-weight-bold: 700;--line-height-tight: 1.25;--line-height-normal: 1.5;--line-height-relaxed: 1.625;--space-1: 4px;--space-2: 8px;--space-3: 12px;--space-4: 16px;--space-5: 20px;--space-6: 24px;--space-8: 32px;--space-10: 40px;--space-12: 48px;--radius-sm: 6px;--radius-md: 10px;--radius-lg: 14px;--radius-xl: 18px;--radius-full: 999px;--shadow-sm: 0 1px 2px rgba(0, 0, 0, .05);--shadow-md: 0 4px 12px rgba(15, 23, 42, .1);--shadow-lg: 0 18px 40px rgba(15, 23, 42, .18);--shadow-xl: 0 18px 45px rgba(15, 23, 42, .25);--shadow-toolbar: 0 18px 45px rgba(15, 23, 42, .65);--shadow-modal: 0 18px 55px rgba(15, 23, 42, .9);--transition-fast: .15s ease;--transition-normal: .2s ease;--transition-slow: .3s ease;--z-base: 0;--z-dropdown: 10;--z-sticky: 20;--z-overlay: 30;--z-modal: 40;--z-toast: 50;--node-width: 320px;--node-min-height: 180px;--node-gap-x: 100px;--node-gap-y: 60px;--node-context-lines-collapsed: 3;--node-response-lines-collapsed: 15;--node-prompt-lines-collapsed: 6}:root{--bg-app: #f5f5f7;--bg-sidebar: #ffffff;--bg-canvas: #fdfdfd;--bg-node: #ffffff;--border-subtle: #e0e0e6;--text-main: #111827;--text-muted: #6b7280;--accent: #2563eb;--accent-soft: #dbeafe;--shadow-soft: 0 18px 45px rgba(15, 23, 42, .16);--radius-lg: 18px;--radius-md: 10px}*{box-sizing:border-box}body{margin:0;font-family:system-ui,-apple-system,BlinkMacSystemFont,SF Pro Text,sans-serif;background:radial-gradient(circle at top left,#eef2ff,#f9fafb 45%,#f5f3ff);color:var(--text-main)}.app-root{height:100vh;display:flex}.workspace{flex:1;display:flex;padding:16px;gap:16px}.sidebar{width:260px;background:var(--bg-sidebar);border-radius:var(--radius-lg);box-shadow:var(--shadow-soft);padding:16px 14px;display:flex;flex-direction:column}.sidebar-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}.sidebar-title{font-weight:700;letter-spacing:.04em;text-transform:uppercase;font-size:13px}.sidebar-settings-button{margin-top:12px;width:100%;border-radius:999px;border:1px solid var(--border-subtle);padding:6px 10px;background:#f3f4f6;font-size:12px;cursor:pointer}.sidebar-new-thread{border-radius:999px;border:1px solid var(--border-subtle);padding:6px 10px;background:linear-gradient(135deg,#f9fafb,#eef2ff);font-size:12px;cursor:pointer}.sidebar-list{flex:1;border-radius:14px;background:#f9fafb;border:1px dashed #e5e7eb;overflow-y:auto;display:flex;flex-direction:column;gap:4px;padding:8px}.sidebar-placeholder{display:flex;align-items:center;justify-content:center;height:100%;color:var(--text-muted);font-size:13px}.sidebar-item{display:flex;align-items:center;justify-content:space-between;padding:8px 12px;border-radius:8px;background:#fff;border:1px solid transparent;cursor:pointer;transition:all .2s ease}.sidebar-item:hover{background:#f3f4f6;border-color:#e5e7eb}.sidebar-item--active{background:#e0e7ff;border-color:#c7d2fe}.sidebar-item-content{display:flex;flex-direction:column;gap:2px;overflow:hidden}.sidebar-item-title{font-size:13px;font-weight:500;color:#374151;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.sidebar-item-date{font-size:11px;color:#9ca3af}.sidebar-item-delete{opacity:0;background:none;border:none;color:#9ca3af;font-size:16px;cursor:pointer;padding:4px;border-radius:4px;transition:all .2s}.sidebar-item:hover .sidebar-item-delete{opacity:1}.sidebar-item-delete:hover{background:#fee2e2;color:#ef4444}.workspace-main{flex:1;display:flex;flex-direction:column;gap:12px;position:relative}.canvas-container{flex:1;background:var(--bg-canvas);border-radius:var(--radius-lg);box-shadow:var(--shadow-soft);padding:12px 16px;display:flex;flex-direction:column}.canvas-toolbar-top{display:flex;align-items:center;justify-content:space-between;font-size:12px;color:var(--text-muted);margin-bottom:8px}.canvas-view{position:relative;flex:1;border-radius:16px;background-color:#f8fafc;border:1px solid var(--border-subtle);overflow:hidden;cursor:grab;background-image:radial-gradient(circle,rgba(0,0,0,.15) 1px,transparent 1px)}.canvas-view--panning{cursor:grabbing}.canvas-inner{position:absolute;top:0;left:0;width:100%;height:100%;transform-origin:0 0}.node{position:absolute;width:340px;min-height:180px;padding:12px;border-radius:var(--radius-lg, 14px);background:var(--bg-node);box-shadow:var(--shadow-lg, 0 18px 40px rgba(15, 23, 42, .18));border:1px solid rgba(148,163,184,.35);cursor:default;-webkit-user-select:none;user-select:none;transition:box-shadow var(--transition-normal, .2s ease)}.node--dragging{z-index:100;box-shadow:var(--shadow-xl, 0 24px 60px rgba(15, 23, 42, .25))}.node--loading{border-color:var(--color-primary, #6366f1)}.node-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px;padding-bottom:8px;border-bottom:1px solid var(--color-border-default, #e5e7eb);cursor:grab}.node-header:active{cursor:grabbing}.node-title{font-size:var(--font-size-sm, 12px);font-weight:var(--font-weight-semibold, 600);color:var(--color-text-secondary, #6b7280);text-transform:uppercase;letter-spacing:.05em}.node-play-button{border-radius:var(--radius-full, 999px);border:none;background:linear-gradient(135deg,var(--color-success, #22c55e),var(--color-success-dark, #16a34a));color:#fff;width:28px;height:28px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:12px;transition:transform var(--transition-fast, .15s ease),opacity var(--transition-fast, .15s ease)}.node-play-button:hover:not(:disabled){transform:scale(1.05)}.node-play-button:disabled{opacity:.7;cursor:not-allowed}.node-play-button--loading{background:var(--color-primary, #6366f1)}.node-body{display:flex;flex-direction:column;gap:10px}.node-section{display:flex;flex-direction:column;gap:4px}.node-section-label{font-size:var(--font-size-xs, 11px);font-weight:var(--font-weight-medium, 500);color:var(--color-text-muted, #9ca3af);text-transform:uppercase;letter-spacing:.04em}.node-section-content{font-size:var(--font-size-md, 13px);line-height:var(--line-height-normal, 1.5);color:var(--color-text-primary, #111827);white-space:pre-wrap;word-break:break-word}.node-section-content--collapsed{display:-webkit-box;-webkit-line-clamp:var(--max-lines, 3);line-clamp:var(--max-lines, 3);-webkit-box-orient:vertical;overflow:hidden}.node-section--context .node-section-content{background:var(--color-bg-muted, #f9fafb);border-radius:var(--radius-sm, 6px);padding:8px 10px;border:1px solid var(--color-border-default, #e5e7eb)}.node-section--response .node-section-content{background:linear-gradient(135deg,#f0fdf4,#ecfdf5);border-radius:var(--radius-sm, 6px);padding:8px 10px;border:1px solid #bbf7d0;min-height:40px}.node--error .node-section--response .node-section-content{background:linear-gradient(135deg,#fef2f2,#fee2e2);border-color:#fca5a5;color:var(--color-error, #ef4444)}.node-prompt-input{resize:none;border-radius:var(--radius-sm, 6px);border:1px solid var(--color-border-default, #e5e7eb);padding:8px 10px;font-size:var(--font-size-md, 13px);font-family:inherit;line-height:var(--line-height-normal, 1.5);transition:border-color var(--transition-fast, .15s ease)}.node-prompt-input:focus{outline:none;border-color:var(--color-primary, #6366f1)}.node-prompt-input--expanded{min-height:200px}.node-expand-button{align-self:flex-start;background:none;border:none;padding:2px 0;font-size:var(--font-size-xs, 11px);color:var(--color-primary, #6366f1);cursor:pointer;transition:opacity var(--transition-fast, .15s ease)}.node-expand-button:hover{opacity:.7}.node-placeholder{color:var(--color-text-muted, #9ca3af);font-style:italic}.node-footer{display:flex;justify-content:flex-end;margin-top:8px;padding-top:8px;border-top:1px solid var(--color-border-default, #e5e7eb);font-size:var(--font-size-sm, 12px)}.node-ports{position:absolute;top:50px;display:flex;flex-direction:column;gap:6px}.node-ports--left{left:-6px;transform:translate(-50%)}.node-ports--right{right:-6px;transform:translate(50%)}.node-port{width:8px;height:8px;border-radius:999px;background-color:#1f2937;box-shadow:0 0 0 2px #fff}.canvas-connections{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;overflow:visible}.canvas-connection{stroke:#1f2937!important;stroke-width:3;stroke-dasharray:1000;stroke-dashoffset:1000;animation:draw-line .8s ease forwards}@keyframes draw-line{to{stroke-dashoffset:0}}.spinner{display:inline-block;width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:spin .8s linear infinite}.spinner--sm{width:14px;height:14px;border-width:2px}@keyframes spin{to{transform:rotate(360deg)}}.node-response-loading{display:flex;align-items:center;gap:8px;color:var(--color-primary, #6366f1);font-size:var(--font-size-md, 13px)}.node-response-loading .spinner{border-color:#6366f133;border-top-color:var(--color-primary, #6366f1)}.node-branch-label{display:inline-flex;align-items:center;gap:6px}.node-branch-label select{border-radius:999px;border:1px solid #d1d5db;padding:2px 8px;font-size:12px}.toolbar{position:absolute;left:50%;bottom:18px;transform:translate(-50%);height:44px;border-radius:999px;background:#0f172ae6;color:#fff;display:flex;align-items:center;padding:0 10px;gap:6px;box-shadow:0 18px 45px #0f172aa6;z-index:10}.toolbar-button{border-radius:999px;border:none;padding:6px 12px;font-size:12px;background:transparent;color:#e5e7eb;cursor:pointer}.toolbar-button--active{background:linear-gradient(135deg,#38bdf8,#6366f1);color:#fff}.toolbar-spacer{flex:1}.settings-panel{border-radius:18px;background:#0f172af5;color:#fff;padding:14px 16px 16px;display:flex;flex-direction:column;gap:10px;box-shadow:0 18px 55px #0f172ae6}.settings-overlay{position:fixed;top:0;right:0;bottom:0;left:0;background:#0f172a73;display:flex;align-items:flex-end;justify-content:center;padding:24px 24px 32px;z-index:20}.settings-header{display:flex;align-items:center;justify-content:space-between}.settings-close{border:none;background:transparent;color:#9ca3af;cursor:pointer;font-size:16px}.settings-title{font-size:13px;font-weight:600;letter-spacing:.06em;text-transform:uppercase}.settings-body{display:flex;flex-wrap:wrap;gap:10px 16px;align-items:center}.settings-field{display:flex;flex-direction:column;gap:4px;font-size:12px}.settings-field input,.settings-field select{border-radius:999px;border:1px solid rgba(148,163,184,.8);padding:6px 10px;background:#0f172ab3;color:#fff;font-size:12px}.settings-hint{margin:0;font-size:11px;color:#9ca3af}.settings-clear-button{margin-top:12px;padding:8px 16px;border-radius:999px;border:1px solid rgba(239,68,68,.5);background:#ef444426;color:#fca5a5;font-size:12px;cursor:pointer;transition:background .2s}.settings-clear-button:hover{background:#ef44444d}.settings-action-button{padding:8px 16px;border-radius:999px;border:1px solid rgba(99,102,241,.5);background:#6366f126;color:#a5b4fc;font-size:12px;cursor:pointer;transition:background .2s;display:inline-flex;align-items:center;justify-content:center}.settings-action-button:hover{background:#6366f14d;color:#fff}.settings-actions-row{display:flex;gap:10px;margin-top:10px;width:100%}.settings-action-item{flex:1}.node-delete-btn{background:transparent;border:none;color:var(--color-text-muted, #9ca3af);font-size:18px;cursor:pointer;padding:4px 8px;border-radius:4px;transition:all .2s;line-height:1;margin-left:auto}.node-delete-btn:hover{background:#fee2e2;color:#ef4444}.saving-badge{font-size:10px;color:var(--color-text-muted);font-weight:500;margin-left:8px;text-transform:none;background:var(--color-bg-muted);padding:2px 6px;border-radius:4px}.sidebar-new-thread{border-radius:999px;border:1px solid var(--border-subtle);padding:8px 16px;background:linear-gradient(135deg,#f9fafb,#eef2ff);font-size:13px;font-weight:500;cursor:pointer;display:flex;align-items:center;gap:8px;color:var(--color-primary);transition:all .2s}.sidebar-new-thread:hover{background:linear-gradient(135deg,#eef2ff,#e0e7ff);border-color:#c7d2fe}.sidebar-settings-button{margin-top:12px;width:100%;border-radius:999px;border:1px solid var(--border-subtle);padding:8px 16px;background:#f9fafb;font-size:13px;font-weight:500;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;color:var(--text-main);transition:all .2s}.sidebar-settings-button:hover{background:#f3f4f6;border-color:#d1d5db}.sidebar-item-title-row{display:flex;align-items:center;gap:8px}.sidebar-item-icon{color:var(--color-text-muted);flex-shrink:0}.sidebar-item--active .sidebar-item-icon{color:var(--color-primary)}.custom-select{position:relative;display:inline-block;min-width:50px;font-family:inherit}.custom-select-trigger{display:flex;align-items:center;justify-content:space-between;gap:4px;padding:4px 8px;background:#fff;border:1px solid var(--color-border-default);border-radius:6px;cursor:pointer;font-size:12px;color:var(--color-text-primary);transition:all .2s;min-height:24px}.custom-select-trigger:hover{border-color:var(--color-primary)}.custom-select--open .custom-select-trigger{border-color:var(--color-primary);box-shadow:0 0 0 2px var(--color-primary-soft)}.custom-select-arrow{color:var(--color-text-muted);transition:transform .2s}.custom-select--open .custom-select-arrow{transform:rotate(180deg)}.custom-select-options{position:absolute;bottom:100%;left:0;width:100%;min-width:max-content;background:#fff;border:1px solid var(--color-border-default);border-radius:6px;box-shadow:0 4px 12px #0000001a;z-index:100;margin-bottom:4px;overflow:hidden;padding:4px}.custom-select-option{padding:6px 12px;cursor:pointer;font-size:12px;border-radius:4px;color:var(--color-text-primary);transition:background .1s}.custom-select-option:hover{background:var(--color-bg-muted)}.custom-select-option--selected{background:var(--color-primary-soft);color:var(--color-primary-dark)}.node-footer-icon{color:var(--color-text-muted);margin-right:-2px}.icon-pulse{animation:pulse 1.5s infinite}@keyframes pulse{0%{opacity:.6}50%{opacity:1}to{opacity:.6}}.toolbar-button{display:flex;align-items:center;justify-content:center;width:32px;height:32px;padding:0}.settings-select{width:100%}.settings-select .custom-select-trigger{background:#0f172ab3;color:#fff;border-color:#94a3b880;padding:8px 12px}.settings-select .custom-select-options{background:#1e293b;border-color:#334155;color:#fff}.settings-select .custom-select-option{color:#e2e8f0}.settings-select .custom-select-option:hover{background:#334155}.settings-select .custom-select-option--selected{background:#4f46e5;color:#fff}.command-palette-overlay{position:fixed;top:0;right:0;bottom:0;left:0;background:#0003;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);z-index:1000;display:flex;justify-content:center;align-items:flex-start;padding-top:14vh}.command-palette-modal{width:600px;max-width:90vw;background:var(--color-bg-surface);border-radius:12px;box-shadow:0 20px 60px #0003;border:1px solid var(--color-border-subtle);overflow:hidden;display:flex;flex-direction:column}.command-palette-search{display:flex;align-items:center;padding:16px;border-bottom:1px solid var(--color-border-subtle)}.command-palette-icon{color:var(--color-text-muted);font-size:18px;margin-right:12px}.command-palette-input{flex:1;border:none;background:transparent;font-size:16px;color:var(--color-text-primary);outline:none}.command-palette-badge{font-size:10px;padding:2px 6px;border-radius:4px;background:var(--color-bg-muted);border:1px solid var(--color-border-default);color:var(--color-text-muted)}.command-palette-list{max-height:300px;overflow-y:auto;padding:8px}.command-palette-item{padding:10px 12px;display:flex;justify-content:space-between;align-items:center;border-radius:8px;cursor:pointer;color:var(--color-text-primary);transition:all .1s}.command-palette-item--selected{background:var(--color-primary-soft);color:var(--color-primary-dark)}.command-palette-item-label{display:flex;align-items:center;gap:10px;font-size:14px}.command-palette-item-icon{width:20px;text-align:center}.command-palette-shortcut{display:flex;gap:4px}.command-palette-shortcut kbd{background:var(--color-bg-surface);border:1px solid var(--color-border-subtle);border-radius:4px;padding:2px 6px;font-size:11px;color:var(--color-text-muted);min-width:20px;text-align:center;box-shadow:0 1px 1px #0000000d}.command-palette-empty{padding:24px;text-align:center;color:var(--color-text-muted);font-size:14px}.context-menu{position:fixed;background:var(--color-bg-surface);border:1px solid var(--color-border-subtle);border-radius:8px;box-shadow:0 10px 30px #00000026;padding:4px;min-width:180px;z-index:2000;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);animation:fadeIn .1s ease-out}.context-menu-item{display:flex;align-items:center;width:100%;padding:8px 12px;border:none;background:transparent;text-align:left;font-size:13px;color:var(--color-text-primary);border-radius:4px;cursor:pointer;transition:background .1s}.context-menu-item:hover{background:var(--color-bg-muted)}.context-menu-item--danger{color:var(--color-error)}.context-menu-item--danger:hover{background:var(--color-error-soft)}.context-menu-icon{margin-right:8px;font-size:14px;width:16px;text-align:center;display:inline-block}@keyframes fadeIn{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.minimap{position:absolute;bottom:24px;right:24px;width:240px;height:160px;background:#fffc;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border:1px solid var(--border-subtle);border-radius:12px;box-shadow:var(--shadow-soft);overflow:hidden;z-index:100;transition:opacity .2s}.minimap:hover{opacity:1;box-shadow:var(--shadow-lg)}.minimap-canvas{width:100%;height:100%;cursor:crosshair;display:block}@keyframes popIn{0%{opacity:0;transform:scale(.8) translateY(10px)}to{opacity:1;transform:scale(1) translateY(0)}}.node{animation:popIn .4s cubic-bezier(.16,1,.3,1) backwards}.toast-container{position:fixed;bottom:24px;left:50%;transform:translate(-50%);display:flex;flex-direction:column;gap:8px;z-index:9999;pointer-events:none}.toast{pointer-events:auto;background:var(--surface);color:var(--text-primary);padding:12px 24px;border-radius:8px;border:1px solid var(--border-subtle);box-shadow:var(--shadow-lg);font-size:14px;font-weight:500;animation:toastIn .3s ease-out;cursor:pointer;display:flex;align-items:center;gap:8px}.toast--error{border-color:#fca5a5;background:#fef2f2;color:#991b1b}.toast--success{border-color:#86efac;background:#f0fdf4;color:#166534}@keyframes toastIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
