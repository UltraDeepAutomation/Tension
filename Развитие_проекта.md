![alt text](image.png)# Развитие проекта Tension

## Цель
Сделать Tension топовым enterprise-инструментом для ветвящихся диалогов и исследования пространства вариантов с помощью LLM.

## Этап 1. Базовый интерактивный Canvas (MVP)
- [x] Vite + React + TypeScript, порт 5176.
- [x] Архитектура в стиле Feature-Sliced Design.
- [x] Canvas с нодами, Sidebar, Toolbar, панель настроек.
- [x] Настройки OpenAI API Key через IndexedDB (без реальных запросов).
- [x] Canvas: zoom, tool (cursor/hand), перетаскивание нод за шапку.

## Этап 2. Ядро графа и ветвление
- [ ] Фича `play-node`: по нажатию ▶ создаются дочерние ноды (ветки).
- [ ] Модель данных: threads, connections, порты нод.
- [ ] Отрисовка связей между нодами (Bezier-линии или прямые сегменты).
- [ ] Быстрая навигация по графу (центрирование на ноде, fit-to-view).

## Этап 3. Персистентность и масштабируемость
- [ ] Полное сохранение графа в IndexedDB: ноды, связи, canvasState, выбранная модель.
- [ ] Миграции схемы IndexedDB (версии БД, безопасные обновления).
- [ ] Подготовка к синхронизации с backend (API-слой, DTO, мапперы домен ↔ transport).

## Этап 4. Интеграция LLM
- [ ] Подключение OpenAI через безопасный серверный proxy.
- [ ] Фича `play-node`: генерация ответов модели и автоматическое создание веток.
- [ ] Поддержка нескольких LLM-провайдеров (OpenAI, Anthropic, локальные модели) через абстрактный клиент.
- [ ] Настройки маршрутизации запросов (по провайдеру, по типу задачи, по стоимости).

## Этап 5. UX и продуктивность
- [ ] Множественный выбор и групповое перемещение нод.
- [ ] История действий (undo/redo) и снапшоты состояния.
- [ ] Поиск по нодам и диалогам.
- [ ] Горячие клавиши и контекстные меню.

## Этап 6. Enterprise-функции
- [ ] Мультипользовательский режим (совместное редактирование графа в реальном времени).
- [ ] Роли и права (viewer, editor, owner).
- [ ] Аудит лог (кто, когда, что изменил).
- [ ] Экспорт/импорт графов (JSON, возможно, собственный формат).

## Этап 7. Качество и эксплуатация
- [ ] ESLint + Prettier + строгий TS (без неявных any).
- [ ] Unit-тесты ключевых фич (play-node, сохранение графа, настройки).
- [ ] E2E-тесты сценариев пользователя (создание графа, перезагрузка, продолжение работы).
- [ ] CI/CD-пайплайн, автоматическая проверка и деплой.

Этот файл можно дополнять по мере появления новых идей и требований,
фиксируя стратегию развития Tension как enterprise-продукта.
